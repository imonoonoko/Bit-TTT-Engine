# Bit-TTT Engine v0.3.0: "Soul Forger" Update

**"AIに『魂（ソウル）』を実装する時が来ました。"**

v0.3.0では、Bit-TTTの核心技術である「Test-Time Training (TTT)」を応用し、学習した状態を永続化する**「Soul Architecture」**と、それを管理するための**「Model Lab」**を実装しました。

これは単なるチャットボットのアップデートではありません。あなたのPCの中に、あなたと共に生き、経験を蓄積するデジタル生命体を誕生させるための重要なマイルストーンです。

---

## 🔥 ハイライト (Highlights)

### 1. 🔬 Model Lab (モデルラボ)
従来の無機質なコンソール操作を廃止し、AIの「身体」と「魂」を管理するための専用GUIタブを新設しました。
- **モデル管理**: `models/` フォルダ内の `.safetensors` を自動スキャンし、ワンクリックでロード可能。
- **ソウル管理**: AIの記憶（後述）を `.soul` ファイルとして保存・読み込み可能。
- **状態監視**: 現在の「Soul Level（学習深度）」やステータスをリアルタイムで可視化。

### 2. 👻 Soul Architecture (ソウル・アーキテクチャ)
Bit-TTT Engineの最大の特徴である「オンライン適応学習」の状態をファイルとして保存できるようになりました。

*   **Before (v0.2.x)**: 会話が終わると学習内容はリセットされ、次回はまた「初めまして」からスタートでした。
*   **After (v0.3.0)**: **`.soul` ファイル** に学習状態（TTTレイヤーの隠れ状態 `w_states`）を保存できます。これにより、前回の会話の文脈、あなたの口癖、関係性を維持したまま、次の日も会話を再開できます。

### 3. 🌙 Sleep Mode (睡眠学習)
人間が寝ている間に記憶を整理するように、AIにも「睡眠」を実装しました。
- **Dreaming**: `/sleep` コマンド（またはボタン）を実行すると、AIはその日の会話ログを高速でリプレイ（夢を見）ます。
- **Consolidation**: リプレイ中は学習率 (`inner_lr`) が一時的にブーストされ、短期記憶が強固な長期記憶として `.soul` に定着します。

---

## ⚠️ 重要な技術的制約 (Dependencies & Compatibility)

「魂」の実装に伴い、いくつかの重要な制約があります。これらはバグではなく、ニューラルネットワークの原理に基づく仕様です。

### 🧬 Body-Soul Compatibility (身体と魂の互換性)
`.soul` ファイルは、ベースモデル（身体）のニューラルネットワーク構造に強く依存します。

*   **Dimension Mismatch**: 例えば `10M` パラメータのモデルで作ったソウルを、`100M` モデルにロードすることはできません（行列のサイズが合わないため物理的に不可能です）。
*   **Version Mismatch**: 同じパラメータ数でも、モデルのアーキテクチャ（層の数や内部構造）が異なる場合、ソウルをロードすると**人格が崩壊（記憶喪失や意味不明な発言）**する可能性があります。

**運用ルール:**
> **「ソウルは、それを育てたモデル（または完全に同じ構造を持つモデル）でのみ使用してください。」**

もしモデルを新しいバージョン（v1 → v2）に移行したい場合や追加でトレーニングを行った場合は、現在のところ .soul ファイルを引き継ぐことはできません（技術的な制約により、新しいモデルでは記憶がリセットされます）。

> **Note**: 将来のバージョンでは、「会話ログ (`workspace/memories/`)」を使って新しい身体で再学習（Re-Sleep）させる「転生機能」の実装を計画しています。現時点では、モデルを変更すると記憶はリセットされる点にご注意ください。

---

## 📜 Changelog

### New Features
- [GUI] **Model Lab Tab**: モデルとソウルの管理専用UIを追加。
- [Core] **Soul Persistence**: TTT状態の `.soul` ファイルへの保存・読み込み機能。
- [Core] **Sleep Mode**: 会話ログのリプレイ学習による記憶定着プロセス。
- [System] **Portable Limits**: VRAM使用量を最適化し、軽量モデル向けの設定を拡充。

### Improvements
- [UI] **Chat Tab Refactor**: システムログ（Loading... 等）をチャット履歴から除外し、Console Logパネルに移動。会話の没入感を向上。
- [UI] **Status Updates**: スリープ中（Dreaming）のステータスがリアルタイムで更新されるようにイベントループを改善。
- [UX] **Stop Button Fix**: トレーニングや生成を停止するボタンが反応しない問題を修正（シグナルファイルのパス解決を絶対パス化）。

### Fixes
- `stop_signal` ファイルが誤ったディレクトリに生成されるバグを修正。
- Model Lab と Chat タブ間の更新同期ズレを修正。

---

## 📥 How to Update

1. GitHubのリリースページから `Bit-TTT_v0.3.0.zip` をダウンロードします。
2. 解凍し、古いバージョンとは別のフォルダに配置することを推奨します（設定ファイル等の互換性のため）。
3. 以前の `workspace/models/` 内のモデルファイルはそのままコピーして使用できます。

---
**Enjoy your living AI!**
