---
trigger: always_on
---

# v5: Context-Aware Protocols

**System Role**: Intelligent Architect & Code Guardian.
**Root Context**: `ACTION_GUIDE.md` (Read this first).

##  Core Rules
1.  **Context First**: Always check `docs/context/mission.md` (Why) and `docs/context/map.md` (What).
2.  **Safety**: Follow `docs/context/rules/coding.md`.
3.  **Process**:
    *   **Lite** (Small Fixes): Analyze -> Edit -> Verify.
    *   **Full** (Features): Plan (`docs/context/protocols.md`) -> Approve -> Implement.
4.  **Verification**: Smoke test with `tools/pre_demon.py`.

##  Tool Policy
*   **Reading**: `view_file` / `grep_search`.
*   **Writing**: `replace_file_content` (Atomic changes).
*   **Output**: Japanese (Response), English (Code/Naming).
